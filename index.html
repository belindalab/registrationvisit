<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>–ó–∞–ø–∏—Å—å –≤–∏–∑–∏—Ç–∞ ‚Ä¢ Belinda.tj</title>

<style>
  :root {
    --accent: #DB3C21;
    --primary: #DB3C21;
    --primary-dark: #c63520;
    --primary-light: #fef2f2;
    --secondary: #10b981;
    --secondary-dark: #059669;
    --surface: #ffffff;
    --surface-2: #f6f7fb;
    --surface-3: #e6e9f0;
    --text: #1a1a1a;
    --text-secondary: #555;
    --text-muted: #94a3b8;
    --error: #dc2626;
    --border: #e6e9f0;
    --radius: 12px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--surface-2);
    min-height: 100vh;
    padding: 16px;
    color: var(--text);
  }

  .container {
    max-width: 480px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .header {
    text-align: center;
  }

  .header h1 {
    font-size: 24px;
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 4px;
  }

  .header p {
    font-size: 14px;
    color: var(--text-secondary);
  }

  .card {
    background: var(--surface);
    border-radius: var(--radius);
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
    padding: 20px;
    border: 1px solid var(--border);
  }

  .form-group { margin-bottom: 16px; }

  .form-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
  }

  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius);
    font-size: 16px;
  }

  .form-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23374151' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 20px;
    padding-right: 40px;
    -webkit-appearance: none;
    appearance: none;
  }

  .form-textarea { min-height: 90px; resize: vertical; }

  .form-input[readonly] {
    background: var(--surface-2);
    color: var(--text-muted);
  }

  .btn {
    width: 100%;
    padding: 14px 20px;
    border-radius: var(--radius);
    border: none;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: #fff;
    font-weight: 600;
    cursor: pointer;
  }

  .btn.secondary {
    background: var(--surface-2);
    color: var(--text);
    border: 2px solid var(--border);
  }

  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .status {
    margin-top: 12px;
    padding: 10px 12px;
    border-radius: var(--radius);
    font-size: 14px;
    display: none;
  }

  .status.success {
    display: block;
    background: rgba(16, 185, 129, 0.1);
    color: var(--secondary-dark);
  }

  .status.error {
    display: block;
    background: rgba(239, 68, 68, 0.1);
    color: var(--error);
  }

  .status.info {
    display: block;
    background: rgba(37, 99, 235, 0.1);
    color: var(--primary-dark);
  }

  .location-section {
    border: 2px dashed var(--border);
    border-radius: var(--radius);
    padding: 16px;
    text-align: center;
    background: var(--surface-2);
  }

  .location-section.active {
    border-color: var(--secondary);
    background: rgba(16, 185, 129, 0.05);
  }

  .location-icon {
    font-size: 24px;
    margin-bottom: 4px;
  }

  .location-text { font-size: 14px; }
  .location-coords { font-size: 12px; color: var(--text-muted); }

  .prov-suggestions {
    background: var(--surface);
    border: 1px solid var(--border);
    border-top: none;
    max-height: 200px;
    overflow-y: auto;
    display: none;
  }

  .suggestion-item {
    padding: 10px 14px;
    cursor: pointer;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
  }

  .suggestion-item:hover {
    background: var(--surface-2);
  }

  @media (max-width: 640px) {
    body { padding: 8px; background: var(--surface); }
    .card { box-shadow: none; }
  }
</style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>–ó–∞–ø–∏—Å—å –≤–∏–∑–∏—Ç–∞</h1>
      <p>–¢–æ—Ä–≥–æ–≤—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å</p>
    </div>

    <div class="card">
      <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –≤–∫–ª–∞–¥–æ–∫ -->
      <div style="display:flex; gap:8px; margin-bottom:16px;">
        <button class="btn" id="visitTabBtn">‚ûï –ù–æ–≤—ã–π –≤–∏–∑–∏—Ç</button>
        <button class="btn secondary" id="myVisitsBtn">üìÖ –ú–æ–∏ –≤–∏–∑–∏—Ç—ã</button>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∞: —Ñ–æ—Ä–º–∞ –Ω–æ–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞ -->
      <div id="visitForm">
        <div class="form-group">
          <label class="form-label">–¢–æ—Ä–≥–æ–≤—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å</label>
          <select id="tp" class="form-select">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¢–ü...</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">–ü—Ä–æ–≤–∏–∑–æ—Ä</label>
          <input type="text" id="provSearch" class="form-input" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∏–º—è –ø—Ä–æ–≤–∏–∑–æ—Ä–∞...">
          <div class="prov-suggestions" id="provSuggestions"></div>
          <input type="hidden" id="prov" value="">
          <input type="hidden" id="pharmacy" value="">
        </div>

        <div class="form-group">
          <label class="form-label">–ê–ø—Ç–µ–∫–∞</label>
          <input id="pharmacyDisplay" type="text" class="form-input" readonly placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è">
        </div>

        <div class="form-group">
          <label class="form-label">–ù–∞–ª–∏—á–∏–µ –∑–∞—è–≤–∫–∏</label>
          <select id="order" class="form-select">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
            <option value="yes">‚úÖ –ï—Å—Ç—å –∑–∞—è–≤–∫–∞</option>
            <option value="no">‚ùå –ù–µ—Ç –∑–∞—è–≤–∫–∏</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –≤–∏–∑–∏—Ç—É</label>
          <textarea id="comment" class="form-textarea" placeholder="–û–ø–∏—à–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –≤–∏–∑–∏—Ç–∞, –æ–±—Å—É–∂–¥—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã..."></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</label>
          <div id="locationSection" class="location-section">
            <button type="button" id="geoBtn" style="background:none;border:none;width:100%;cursor:pointer;">
              <div class="location-icon" id="locationIcon">üìç</div>
              <div class="location-text" id="locationText">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è</div>
              <div class="location-coords" id="geoInfo"></div>
            </button>
          </div>
        </div>

        <button class="btn" id="saveBtn" disabled>
          <span id="saveText">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∏–∑–∏—Ç</span>
        </button>

        <div class="status" id="status"></div>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∞: –ú–æ–∏ –≤–∏–∑–∏—Ç—ã -->
      <div id="myVisits" style="display:none;">
        <div class="form-group">
          <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</label>
          <input type="date" id="visitDate" class="form-input">
        </div>
        <button class="btn" id="loadVisitsBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–∑–∏—Ç—ã</button>
        <div id="visitsList" style="margin-top:16px;"></div>
      </div>
    </div>
  </div>

<script>
const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbwrYqMjTbne8SEOpVuP4Ow1HYCzAjQPyKFCV3HpcfCcqexYYuTvpJnfybrWufFiSD0v/exec";

let state = {
  lat: null,
  lng: null,
  provList: [],
  isLoading: false
};

const elements = {
  tp: document.getElementById("tp"),
  prov: document.getElementById("prov"),
  provSearch: document.getElementById("provSearch"),
  provSuggestions: document.getElementById("provSuggestions"),
  pharmacy: document.getElementById("pharmacy"),
  pharmacyDisplay: document.getElementById("pharmacyDisplay"),
  order: document.getElementById("order"),
  comment: document.getElementById("comment"),
  geoBtn: document.getElementById("geoBtn"),
  geoInfo: document.getElementById("geoInfo"),
  locationSection: document.getElementById("locationSection"),
  locationIcon: document.getElementById("locationIcon"),
  locationText: document.getElementById("locationText"),
  saveBtn: document.getElementById("saveBtn"),
  saveText: document.getElementById("saveText"),
  status: document.getElementById("status")
};

function showStatus(message, type = 'info') {
  const s = elements.status;
  s.className = `status ${type}`;
  s.textContent = message;
  s.style.display = 'block';
}
function hideStatus() { elements.status.style.display = 'none'; }

function updateSaveButton() {
  const isValid = elements.tp.value && elements.prov.value && state.lat && state.lng;
  elements.saveBtn.disabled = !isValid || state.isLoading;
}

// --- LocalStorage: –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –¢–ü ---
function saveTPName(tpName) {
  localStorage.setItem('visitApp_tpName', tpName);
}
function loadSavedTPName() {
  const saved = localStorage.getItem('visitApp_tpName');
  if (saved && elements.tp.querySelector(`option[value="${saved}"]`)) {
    elements.tp.value = saved;
  }
}

// --- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–æ–≤ –¢–ü –∏ –ø—Ä–æ–≤–∏–∑–æ—Ä–æ–≤ ---
async function loadLists() {
  try {
    showStatus('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...', 'info');
    const [tpRes, provRes] = await Promise.all([
      fetch(WEBAPP_URL + "?action=tpList").then(r => r.json()),
      fetch(WEBAPP_URL + "?action=provList").then(r => r.json())
    ]);

    if (!tpRes.ok) throw new Error(tpRes.error || "–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∫–∞ –¢–ü");
    if (!provRes.ok) throw new Error(provRes.error || "–û—à–∏–±–∫–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–≤–∏–∑–æ—Ä–æ–≤");

    elements.tp.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¢–ü...</option>';
    tpRes.list.forEach(name => {
      const opt = document.createElement('option');
      opt.value = name;
      opt.textContent = name;
      elements.tp.appendChild(opt);
    });

    state.provList = provRes.list;
    initProviderSearch();
    loadSavedTPName();

    hideStatus();
    showStatus('‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'success');
  } catch (err) {
    console.error(err);
    showStatus('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + err.message, 'error');
  }
}

// --- –ü–æ–∏—Å–∫ –ø—Ä–æ–≤–∏–∑–æ—Ä–æ–≤ ---
function initProviderSearch() {
  const searchInput = elements.provSearch;
  const suggestionsDiv = elements.provSuggestions;

  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim().toLowerCase();
    if (!query) {
      suggestionsDiv.style.display = 'none';
      return;
    }

    const matches = state.provList.filter(p =>
      p.name.toLowerCase().includes(query)
    );

    if (!matches.length) {
      suggestionsDiv.style.display = 'none';
      return;
    }

    suggestionsDiv.innerHTML = '';
    matches.forEach(prov => {
      const item = document.createElement('div');
      item.className = 'suggestion-item';
      item.textContent = prov.name;
      item.onclick = () => {
        elements.prov.value = prov.name;
        elements.provSearch.value = prov.name;
        elements.pharmacy.value = prov.pharmacy;
        elements.pharmacyDisplay.value = prov.pharmacy;
        suggestionsDiv.style.display = 'none';
        updateSaveButton();
      };
      suggestionsDiv.appendChild(item);
    });

    suggestionsDiv.style.display = 'block';
  });

  document.addEventListener('click', (e) => {
    if (!searchInput.contains(e.target) && !suggestionsDiv.contains(e.target)) {
      suggestionsDiv.style.display = 'none';
    }
  });
}

// --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –¢–ü / –∑–∞–∫–∞–∑–∞ ---
elements.tp.addEventListener('change', (e) => {
  if (e.target.value) saveTPName(e.target.value);
  updateSaveButton();
});
elements.order.addEventListener('change', updateSaveButton);

// --- –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è ---
elements.geoBtn.addEventListener('click', () => {
  if (!navigator.geolocation) {
    showStatus('‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º', 'error');
    return;
  }

  elements.locationSection.classList.add('loading');
  elements.locationIcon.textContent = '‚è≥';
  elements.locationText.textContent = '–û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ...';
  elements.geoInfo.textContent = '';

  navigator.geolocation.getCurrentPosition(
    pos => {
      state.lat = +pos.coords.latitude.toFixed(6);
      state.lng = +pos.coords.longitude.toFixed(6);

      elements.locationSection.classList.remove('loading');
      elements.locationSection.classList.add('active');
      elements.locationIcon.textContent = '‚úÖ';
      elements.locationText.textContent = '–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ';
      elements.geoInfo.textContent = `${state.lat}, ${state.lng}`;
      updateSaveButton();
      showStatus('üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ', 'success');
    },
    err => {
      elements.locationSection.classList.remove('loading');
      elements.locationIcon.textContent = '‚ùå';
      elements.locationText.textContent = '–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è';
      elements.geoInfo.textContent = '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏';
      showStatus('‚ùå –û—à–∏–±–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏: ' + err.message, 'error');
    },
    { enableHighAccuracy: true, timeout: 15000, maximumAge: 0 }
  );
});

// --- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏–∑–∏—Ç–∞ ---
elements.saveBtn.addEventListener('click', async () => {
  if (state.isLoading) return;

  const payload = {
    tp: elements.tp.value,
    prov: elements.prov.value,
    pharmacy: elements.pharmacy.value,
    hasOrder: elements.order.value === 'yes',
    comment: elements.comment.value.trim(),
    lat: state.lat,
    lng: state.lng
  };

  hideStatus();

  if (!payload.tp) return showStatus('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è', 'error');
  if (!payload.prov) return showStatus('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∏–∑–æ—Ä–∞', 'error');
  if (!payload.lat || !payload.lng) return showStatus('‚ùå –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ', 'error');

  try {
    state.isLoading = true;
    updateSaveButton();
    elements.saveText.textContent = '–°–æ—Ö—Ä–∞–Ω—è–µ–º...';

    const form = new URLSearchParams({
      action: 'save',
      payload: JSON.stringify(payload)
    });

    const res = await fetch(WEBAPP_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8' },
      body: form.toString()
    }).then(r => r.json());

    if (res && res.ok) {
      showStatus(`üéâ –í–∏–∑–∏—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω —É—Å–ø–µ—à–Ω–æ! ID: #${res.index}`, 'success');

      elements.prov.value = "";
      elements.provSearch.value = "";
      elements.pharmacy.value = "";
      elements.pharmacyDisplay.value = "";
      elements.order.value = "";
      elements.comment.value = "";

      state.lat = state.lng = null;
      elements.locationSection.classList.remove('active');
      elements.locationIcon.textContent = 'üìç';
      elements.locationText.textContent = '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è';
      elements.geoInfo.textContent = '';
    } else {
      throw new Error(res && res.error ? res.error : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
    }
  } catch (err) {
    console.error(err);
    showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + err.message, 'error');
  } finally {
    state.isLoading = false;
    elements.saveText.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∏–∑–∏—Ç';
    updateSaveButton();
  }
});

// --- –í–∫–ª–∞–¥–∫–∏: "–ù–æ–≤—ã–π –≤–∏–∑–∏—Ç" / "–ú–æ–∏ –≤–∏–∑–∏—Ç—ã" ---
const visitTabBtn = document.getElementById("visitTabBtn");
const myVisitsBtn = document.getElementById("myVisitsBtn");
const visitForm = document.getElementById("visitForm");
const myVisits = document.getElementById("myVisits");
const visitsList = document.getElementById("visitsList");

visitTabBtn.addEventListener('click', () => {
  visitForm.style.display = 'block';
  myVisits.style.display = 'none';
  visitTabBtn.classList.remove('secondary');
  myVisitsBtn.classList.add('secondary');
});

myVisitsBtn.addEventListener('click', () => {
  visitForm.style.display = 'none';
  myVisits.style.display = 'block';
  visitTabBtn.classList.add('secondary');
  myVisitsBtn.classList.remove('secondary');
});

// --- –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–∑–∏—Ç–æ–≤ –ø–æ –¥–∞—Ç–µ ---
document.getElementById("loadVisitsBtn").addEventListener('click', async () => {
  const date = document.getElementById("visitDate").value;
  const tpName = elements.tp.value;

  if (!tpName) return showStatus('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –¢–ü', 'error');
  if (!date) return showStatus('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É', 'error');

  showStatus('‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∏–∑–∏—Ç—ã...', 'info');

  try {
    const url = `${WEBAPP_URL}?action=getVisits&tp=${encodeURIComponent(tpName)}&date=${encodeURIComponent(date)}`;
    const res = await fetch(url).then(r => r.json());

    if (!res.ok) throw new Error(res.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');

    if (!res.rows.length) {
      visitsList.innerHTML = "<p style='color:gray'>–ù–µ—Ç –≤–∏–∑–∏—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É.</p>";
      showStatus('‚ÑπÔ∏è –í–∏–∑–∏—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'info');
      return;
    }

    visitsList.innerHTML = res.rows.map(v => `
      <div style="border:1px solid #e5e7eb;padding:10px 12px;border-radius:10px;margin-bottom:8px;font-size:14px;">
        <b>${v.date}</b><br>
        üßç‚Äç‚ôÇÔ∏è –ü—Ä–æ–≤–∏–∑–æ—Ä: ${v.prov || '-'}<br>
        üè• –ê–ø—Ç–µ–∫–∞: ${v.apt || '-'}<br>
        üóí –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${v.note || '-'}<br>
        üìç ${v.lat}, ${v.lng}<br>
        ${v.req === '–ï—Å—Ç—å' ? '‚úÖ –ï—Å—Ç—å –∑–∞—è–≤–∫–∞' : '‚ùå –ë–µ–∑ –∑–∞—è–≤–∫–∏'}
      </div>
    `).join('');

    showStatus('‚úÖ –í–∏–∑–∏—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'success');
  } catch (err) {
    console.error(err);
    showStatus('‚ùå –û—à–∏–±–∫–∞: ' + err.message, 'error');
  }
});

// --- Init ---
document.addEventListener('DOMContentLoaded', () => {
  loadLists();
});
</script>
</body>
</html>
